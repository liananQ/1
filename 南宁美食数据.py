import streamlit as st
import pandas as pd
import numpy as np

# 设置网站页面标题
st.set_page_config(page_title='南宁美食数据',page_icon='🥬')

# 设置页面标题
st.header("📍南宁美食地图")

# 创建餐厅基础数据框
restaurants = pd.DataFrame({
    "餐厅": ["星艺会尝不忘", "高峰柠檬鸭", "复记老友粉", "好友缘", "西冷牛排店"],
    "类型": ["中餐", "中餐", "快餐", "自助餐", "西餐"],
    "评分": [4.2, 4.5, 4.0, 4.7, 4.3],
    "人均消费(元)": [15, 20, 25, 35, 50],
    "latitude": [22.853838, 22.965046, 22.812200, 22.809105, 22.839699],
    "longitude": [108.222177, 108.353921, 108.266629, 108.378664, 108.245804]
})

# 创建餐厅数据展示
df = pd.DataFrame(restaurants)
# 设置自定义序号索引
index = pd.Series([1,2,3,4,5], name='序号')
df.index = index
# 显示餐厅数据表格
st.dataframe(df)
# 在地图上标记餐厅位置
st.map(df)

# 创建餐厅评分趋势部分
st.header("⭐ 餐厅评分")
# 月度评分数据
data = {
      '月份':['01月', '02月', '03月','04月', '05月', '06月','07月', '08月', '09月','10月', '11月', '12月'],
      '复记老友粉':[200, 150, 180,120,140,150,135,180,155,165,180,200],
      '好有缘':[120, 160, 123,111,120,150,114,119,159,168,123,155],
      '星艺荟尝不忘':[110, 100, 160,120,150,114,119,140,181,115,161,120],
      '白妈螺蛳粉':[200, 150, 180,189,169,178,185,169,155,147,158,196],
      '高峰柠檬鸭':[100, 140, 123,123,152,126,142,153,146,124,134,153]
}

# 创建评分趋势数据框
df = pd.DataFrame(data)
# 设置月份序号索引
index = pd.Series([1,2,3,4,5,6,7,8,9,10,11,12], name='序号')
df.index = index
# 显示评分趋势数据表格
st.dataframe(df)
# 绘制评分趋势折线图
st.line_chart(df, x='月份')

# 创建餐厅价格对比部分
st.header("💰 不同类型餐厅价格")
# 绘制人均消费柱状图
st.bar_chart(restaurants, x='餐厅', y='人均消费(元)')

# 创建用餐高峰时段部分
st.header("⏱️ 用餐高峰时段")
# 时段客流量数据
data1 = {
      '用餐时段':['00-02','02-04','04-06','06-08','08-10','10-12','14-16','16-18','18-20','20-22','22-24'],
      '星艺会尝不忘':[0,0,2,0,2,5,10,15,2,3,8],
      '高峰柠檬鸭':[0,0,2,0,2,5,10,15,2,3,8],
      '复记老友粉':[0,0,2,0,2,5,10,15,2,3,8],
      '好友缘':[0,0,2,0,2,5,10,15,2,3,8],
      '西冷牛排店':[0,0,2,0,2,5,10,15,2,3,8]
}

# 创建用餐时段数据框
df1 = pd.DataFrame(data1)
# 设置时段序号索引
index = pd.Series([1,2,3,4,5,6,7,8,9,10,11], name='序号')
df1.index = index
# 显示用餐时段数据表格
st.dataframe(df1)
# 绘制用餐时段面积图
st.area_chart(data1, x='用餐时段')
